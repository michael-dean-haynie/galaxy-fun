//==================================================================================================
// 
// Generated Map Script
// 
// Name:   Just Another StarCraft II Map
// 
//==================================================================================================
include "TriggerLibs/NativeLib"

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
void InitLibs () {
    libNtve_InitLib();
}

//--------------------------------------------------------------------------------------------------
// Trigger Variables
//--------------------------------------------------------------------------------------------------
trigger gt_initialization;
trigger gt_codegeneration;
trigger gt_buttoncallback;

//--------------------------------------------------------------------------------------------------
// Custom Script: Bootstrap
//--------------------------------------------------------------------------------------------------
include "scripts/main"

//--------------------------------------------------------------------------------------------------
// Custom Script Initialization
//--------------------------------------------------------------------------------------------------
void InitCustomScript () {
    main();
}

//--------------------------------------------------------------------------------------------------
// Trigger: initialization
//--------------------------------------------------------------------------------------------------
bool gt_initialization_Func (bool testConds, bool runActions) {
    // Variable Declarations
    const int lv_screenHeight = 1200;

    // Automatic Variable Declarations
    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    CameraPan(1, PointFromName("hotkeytraining_structure_location"), 0.0, -1, 10.0, false);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_initialization_Init () {
    gt_initialization = TriggerCreate("gt_initialization_Func");
    TriggerAddEventMapInit(gt_initialization);
}

//--------------------------------------------------------------------------------------------------
// Trigger: code-generation
//--------------------------------------------------------------------------------------------------
bool gt_codegeneration_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    // Actions
    if (!runActions) {
        return true;
    }

    TechTreeUpgradeAllow(1, "WarpGateResearch", false);
    UnitSetProgressComplete(EventUnitProgressUnit(), 1, 100);
    TechTreeAbilityAllow(1, AbilityCommand("UpgradeToWarpGate", 0), true);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_codegeneration_Init () {
    gt_codegeneration = TriggerCreate("gt_codegeneration_Func");
    TriggerEnable(gt_codegeneration, false);
    TriggerAddEventUnitTrainProgress(gt_codegeneration, null, c_unitProgressStageStart);
}

//--------------------------------------------------------------------------------------------------
// Trigger: button-callback
//--------------------------------------------------------------------------------------------------
bool gt_buttoncallback_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    unitgroup auto925C3563_g;
    int auto925C3563_u;
    unit auto925C3563_var;

    // Conditions
    if (testConds) {
        if (!((EventDialogControl() == EventDialogControl()))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    auto925C3563_g = UnitGroupSearch(null, c_playerAny, PointFromName("hotkeytraining_structure_location"), 4.0, UnitFilter(0, 0, 0, 0), 0);
    auto925C3563_u = UnitGroupCount(auto925C3563_g, c_unitCountAll);
    for (;; auto925C3563_u -= 1) {
        auto925C3563_var = UnitGroupUnitFromEnd(auto925C3563_g, auto925C3563_u);
        if (auto925C3563_var == null) { break; }
        UnitKill(auto925C3563_var);
    }
    TriggerDebugOutput(1, IntToText(0), true);
    return true;
}

//--------------------------------------------------------------------------------------------------
void gt_buttoncallback_Init () {
    gt_buttoncallback = TriggerCreate("gt_buttoncallback_Func");
    TriggerEnable(gt_buttoncallback, false);
    TriggerAddEventDialogControl(gt_buttoncallback, c_playerAny, c_invalidDialogControlId, c_triggerControlEventTypeSelectionChanged);
}

//--------------------------------------------------------------------------------------------------
// Trigger Initialization
//--------------------------------------------------------------------------------------------------
void InitTriggers () {
    gt_initialization_Init();
    gt_codegeneration_Init();
    gt_buttoncallback_Init();
}

//--------------------------------------------------------------------------------------------------
// Map Initialization
//--------------------------------------------------------------------------------------------------
void InitMap () {
    InitLibs();
    InitCustomScript();
    InitTriggers();
}
